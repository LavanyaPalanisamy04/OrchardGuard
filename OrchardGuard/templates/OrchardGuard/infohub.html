
{% extends 'OrchardGuard/base.html' %}
{% load static %}
{% block extra_head %}
    <title>Disease Prediction</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-+0n0xVW2eSR5Zgb2q9WrMuuMSwUx6j7U3DBQk5rVjNExlSMXQz/i5XyJ2c5IQF5k" crossorigin="anonymous"></script>
    <link rel="stylesheet" href={% static 'OrchardGuard/infohub.css' %}>
    <style>
    html {
	font-size: 10px;
	font-family: 'Montserrat', sans-serif;
	scroll-behavior: smooth;
}
a {
	text-decoration: none;
}
    .bg-video {
    position: fixed;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1; /* Stay behind all content */
    filter: blur(1px); /* Add blur effect */
    {#-webkit-filter: blur(px); /* For Safari */#}
}

/* Header Section Styling */
#header .container {
    height: 60px;
  max-width: 100%;
  margin: 0 auto;
   padding-left: 10px; /* Adjust as needed for your design */
  padding-right: 20px;
}

#header .nav-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
    height: 30px;
}
#header .brand {
  margin-right: 0px; /* This will push the brand to the left */
}
#header .brand h1 {
  font-size: 3.0rem; /* Adjust the size to match the design */
  font-weight: 700;
  color: #fff;
  margin: 0;
  {#margin-right:0px;#}
    white-space: nowrap;

     font-family:Lucida Handwriting;
}

#header .brand h1 span {
  color: #FF0000; /* The color of the spans to make them red */
}

#header .nav-list ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
    margin-left: 90px;
     flex-wrap: nowrap;
}

#header .nav-list ul li {
  padding: 0 20px;
}

#header .nav-list ul li a {
  text-decoration: none;
  color: #fff;
  font-size: 2.0rem;
    font-weight: 10;/* Adjust the size to match the design */
  transition: color 0.2s;
    letter-spacing: 0.12rem;
    font-family:  sans-serif;
     white-space: nowrap;
     padding: 10 0 px;



}

#header .nav-list ul li a:hover {
  color: #FF0000;
}

/* Responsive design adjustments, if necessary */
@media (max-width: 768px) {
  #header .nav-bar {
    flex-direction: column;
  }

  #header .nav-list {
    width: 100%;
  }

  #header .nav-list ul {
    flex-direction: column;
    align-items: center;
  }

  #header .nav-list ul li {
    padding: 10px 0;
  }
}

/* Fixed Header */
#header {
  position: fixed;
	z-index: 1000;
	left: 0;
	top: 0;
    background-color: #29323c;

	width: 100%;
}

/* Add padding at the top of the body to avoid overlap with the fixed header */
body {
  padding-top: 80px; /* Adjust if your header's actual height is different */
}


</style>

{% endblock %}
{% block content %}
 <section id="header">
  <div class="header container">
    <div class="nav-bar">
      <div class="brand">
        <a href="#hero">
          <h1><span>O</span>rchard <span>G</span>uard</h1>
        </a>
      </div>
      <div class="nav-list">
        <ul>
          <li><a href="{% url 'homepage' %}">HOME</a></li>
          <li><a href="#services" data-after="Service">ABOUT US</a></li>
          <li><a href="#contact" data-after="Projects">CONTACT US</a></li>
          <li><a href="{% url 'upload_and_predict' %}">PREDICT</a></li>
          <li><a href="{% url 'infohub' %}">INFOHUB</a></li>
          <li><a href="{% url 'logout' %}">LOGOUT</a></li>
        </ul>
      </div>
    </div>
  </div>
</section>


<!-- Rest of your content -->

{#<video autoplay muted loop class="bg-video">#}
{#    <source src="{% static 'OrchardGuard/videos/home.mp4' %}" type="video/mp4">#}
{#    Your browser does not support HTML5 video.#}
{#</video>#}

    <div class="container">
        <h1>Search Information</h1>
        <div class="content-container"> <!-- This is the new parent flex container -->
            <div class="forms-container">
        <div class="search-options">
            <div class="search-option" id="any-search-link">Any Search</div>
            <div class="search-option" id="search-link">Search</div>
            <div class="search-option" id="list-search-link">List Search</div>
        </div>

        <div class="forms-container">
            <!-- Any Search Form -->
            <div id="any-search-form" class="form-container">
                <h2>Any Search Form</h2>
                <form method="post" action="{% url 'any_search' %}">
                    {% csrf_token %}
                    {{ any_search_form.as_p }}
                    <button type="submit">Search</button>
                </form>
            </div>

            <!-- Search Form -->
            <div id="search-form" class="form-container">
                <h2>Search Form</h2>
                <form method="post" action="{% url 'search' %}">
                    {% csrf_token %}
                    {{ search_form.as_p }}
                    <button type="submit">Search</button>
                </form>
            </div>

            <!-- List Search Form -->
            <div id="list-search-form" class="form-container">
                <h2>List Search Form</h2>
                <form method="post" action="{% url 'list_search' %}">
                    {% csrf_token %}
                    {{ list_search_form.as_p }}
                    <button type="submit">Search</button>
                </form>
            </div>
        </div>
            </div>
        <!-- Result Display -->
        <div class="results-container" id="search-results"></div>
    </div>
    </div>
</div>

    <script>
        // JavaScript to toggle form visibility

    // This function is used to hide all forms initially and show only the form related to the clicked link.
    function toggleFormVisibility(formIdToShow) {
        const forms = document.querySelectorAll('.form-container');
        forms.forEach(form => {
            form.style.display = 'none'; // Hide all forms by default
        });

        // Show the form that has the ID passed to the function
        const formToShow = document.getElementById(formIdToShow);
        if (formToShow) {
            formToShow.style.display = 'block';
        }
    }

    // This function sets up the event listeners for the search option links
    function setupSearchOptionLinks() {
        document.querySelectorAll('.search-option').forEach(option => {
            option.addEventListener('click', function() {
                // Extract the related form ID from the clicked link's ID
                const formIdToShow = option.id.replace('-link', '-form');
                toggleFormVisibility(formIdToShow);

                // Hide the results container
                document.getElementById('search-results').style.display = 'none';
            });
        });
    }

    // This function handles the form submission event
    function setupFormSubmissions() {
        document.querySelectorAll('.form-container form').forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);

                // Show a loading message or similar feedback to the user
                const resultsContainer = document.getElementById('search-results');
                resultsContainer.style.display = 'block';
                resultsContainer.innerHTML = '<p>Loading results...</p>';

                const xhr = new XMLHttpRequest();
                xhr.onload = function() {
                    if (xhr.status === 200) {
                        resultsContainer.innerHTML = xhr.responseText;
                    } else {
                        console.error('Request failed. Returned status of ' + xhr.status);
                        resultsContainer.innerHTML = '<p>Error loading results.</p>';
                    }
                };
                xhr.open('POST', form.action);

                // This line needs adjustment for actual CSRF token handling in a live environment
                // xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}'); // Uncomment or modify in actual implementation

                xhr.send(formData);
            });
        });
    }

    // Run the setup functions when the window loads
    window.onload = function() {
        // Initially hide all forms
        toggleFormVisibility('any-search-form');
        // Setup the search option link event listeners
        setupSearchOptionLinks();
        // Setup the form submission event handlers
        setupFormSubmissions();
    };
</script>

{% endblock %}